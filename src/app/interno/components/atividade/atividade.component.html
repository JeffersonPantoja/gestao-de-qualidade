<div class="py-3">
  <div>
      <div class="bg-formulario p-3 m-3">

          <p-table
              [value]="atividades"
              [responsive]="true"
              [paginator]="true"
              [lazy]="true"
              (onLazyLoad)="loadPage($event)"
              [totalRecords]="totalRecords"
              [rows]="10"
              dataKey="id"
          >
              <ng-template pTemplate="caption">
                  <div class="d-flex justify-content-between">
                      <h5>Lista de atividades</h5>
                      <button
                          pButton
                          type="button"
                          icon="pi pi-plus"
                          class="ui-button-success mr-1"
                          (click)="openRegister()"
                      >
                      </button>
                  </div>
              </ng-template>
              <ng-template pTemplate="header">
                  <tr>
                      <th>Título</th>
                      <th>Data de início</th>
                      <th>Data de termino</th>
                      <th>Status</th>
                  </tr>
              </ng-template>
              <ng-template pTemplate="body" let-atividade let-expanded="expanded">
                  <tr>
                      <td>
                        <a href="#" [pRowToggler]="atividade">{{atividade.titulo}}</a>
                      </td>
                      <td>{{atividade.dataInicio}}</td>
                      <td>{{atividade.dataFim}}</td>
                      <td>{{getNameStatus(atividade.status)}}</td>
                  </tr>
              </ng-template>
              <ng-template pTemplate="rowexpansion" let-atividade>
                <tr>
                  <td [attr.colspan]="4">
                    <div class="row">
                      <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-3">
                        <div class="mb-3">
                          <p><b> Produto: </b>{{atividade.produto.nome}}</p>
                        </div>
                      </div>

                      <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 mb-3">
                        <div class="mb-3">
                          <p><b> Setor: </b>{{atividade.setor.nome}}</p>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div  class="col mb-3">
                        <div class="mb-3">
                          <p><b> Descrição: </b>  {{atividade.descricao}} </p>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div  class="col mb-3">
                        <div class="mb-3 table-responsive">
                          <p><b>Responsáveis:</b></p>
                          <table class="table table-hover">
                            <thead>
                              <tr>
                                <th>nome</th>
                                <th>email</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr *ngFor="let responsavel of atividade.responsaveis">
                                <td>{{responsavel.nome}}</td>
                                <td>{{responsavel.email}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              </ng-template>
          </p-table>
      </div>
  </div>
</div>

